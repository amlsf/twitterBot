<!--
To change this template use Tools | Templates.
-->
<!DOCTYPE html>
<html>
<head>
	<style>
	html, body {
		background: black;
	}
	#tweetPreview {
		width: 100%px;
		height: 100px;
		border: 1px solid gray;
	}
		
	</style>
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js">	</script>
	
	<script type = "text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.4/handlebars.min.js"></script>
	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.3.5/tabletop.js"></script>	
	
    <title>Create a Twitter bot!</title>
	
	
	<script>		
		
	var testData = null;
		
			function init() {
  	Tabletop.init( { key: document.forms.form1.url.value,
                   callback: function(data, tabletop) { testData = data; console.log("var testData is available") },
				  simpleSheet: true }) }
		
		//TODO: testData to amy
		
</script>

</head>
<body>
	<div class="container">
			<div class="col-md-7 col-md-offset-3">
				
				<H1>Build your own Twitter Bot!</H1>
				<p>Twitter Bots are fun and easy. Start with a google spreadsheet.</p>
				<form role=form id = "form1">
					<div class = "form-group">
						<label >"Key" of Google Spreadsheet</label><br/>
						<input type = "text" class="form-control" placeholder="www.googs.com" name="url" id="url" />
						<button type="button" class="btn" onclick = "init()">Set the Key</button>
						<br/>
					</div>
				</form>
				
				
		<form role = form id = "form3">
			<div class = "form-group">
				<label>Column Name 1</label>
				<input type = "text" class="form-control" placeholder="columnname" name = "column1" id = "column1" SIZE=30 /> <br />
				<label>Column Name 2</label>
				<input type = "text" class="form-control" placeholder="columnname" name = "column2" id = "column2" SIZE=30 /> <br />
				<label>Column Name 3</label>
				<input type = "text" class="form-control" placeholder="columnname" name = "column3" id = "column3" SIZE=30 /> <br />
				<button type ="button" class = "btn" onclick="twitterBot.setColNames()">
					Set Column Names
				</button>
				
			</div>		
			
		</form>		
				
				
				
		<form role = form id = "form2">
			<div class ="form-group">
			<label >Text of Tweet</label><br/>
			<textarea class="form-control" ROWS=6 COLS=70 name = "tweet" id = "tweet"></textarea>
			<button type="button" name = "tweetPreviewButton" id = "tweetPreviewButton" onclick="twitterBot.tweetPreview()">Preview</button>
			</div>
			
		<label>Preview</label>	
			
		<div id = "tweetPreview" class="form-control">
			
			</div>
			
			
		</form>

		
				
				
			
	<script>
	console.log("Column 1 = " + document.forms.form3.column1.value);	
	
	var twitterBot = {};
	//columns into usable data
twitterBot.setColNames =	function (){
		this.column1 = document.forms.form3.column1.value;
		this.column1RowValue = testData[1][this.column1];
		$("#tweet").append("{{" + this.column1 + "}}");
	
		this.column2 = document.forms.form3.column2.value;
		this.column2RowValue = testData[1][this.column2];
		$("#tweet").append("{{" + this.column2 + "}}");
	
		this.column3 = document.forms.form3.column3.value;
		this.column3RowValue = testData[1][this.column3];
		$("#tweet").append("{{" + this.column3 + "}}");
	}
	
	//create preview of tweet
	twitterBot.tweetPreview = function () {
		var tweetPreviewString = document.forms.form2.tweet.value;
		tweetPreviewString = tweetPreviewString.replace("{{" + this.column1 + "}}", this.column1RowValue)
			.replace("{{" + this.column2 + "}}", this.column2RowValue)
			.replace("{{" + this.column3 + "}}", this.column3RowValue);
		$("#tweetPreview").html(tweetPreviewString);
	}
	
	
	
	</script>
	</div>		
</div>

</body>
</html>